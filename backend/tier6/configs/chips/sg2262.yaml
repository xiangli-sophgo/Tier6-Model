# SG2262 芯片配置
# 单芯片 TPU 配置

chip:
  name: SG2262
  architecture: TPU_V7
  process: 7nm
  frequency_ghz: 1.0

  # 核心配置
  cores:
    count: 4  # 4 个计算核心
    lanes_per_core: 64  # 每核 64 Lane

  # 计算单元
  compute_units:
    cube:
      mac_per_lane:
        INT8: 1000  # 用于达到 256 TFLOPS
        FP8: 1000
        BF16: 500
        FP16: 500
        TF32: 250
        INT4: 2000

    vector:
      eu_per_lane:
        INT8: 64
        FP8: 64
        INT16: 32
        BF16: 32
        FP16: 32
        INT32: 16
        FP32: 16

  # 内存层级
  memory:
    gmem:
      type: LPDDR5
      capacity_gb: 64
      bandwidth_gbps: 273
      latency_ns: 100

    l2m:
      capacity_mb: 64
      bandwidth_gbps: 1000
      latency_ns: 10

    lmem:
      capacity_mb: 64  # 4 cores × 16MB per core
      bandwidth_gbps: 2000
      latency_ns: 1

    smem:
      capacity_kb: 256  # 4 cores × 64KB per core
      bandwidth_gbps: 2000
      latency_ns: 1

  # DMA 引擎
  dma_engines:
    gdma:
      bandwidth_gbps: 68  # dram_bw / 4 cores
      startup_latency_ns: 100
      efficiency: 0.9

    sdma:
      bandwidth_gbps: 1000
      startup_latency_ns: 50
      efficiency: 0.95

  # 互联 (单芯片，无 C2C)
  interconnect:
    noc:
      topology: mesh
      bandwidth_gbps: 1000
      latency_ns: 10

    c2c:
      links: 0
      bandwidth_gbps: 0

# 派生参数（供参考）
# cube_peak_bf16_tflops: 256.0  # 4 * 64 * 500 * 2 * 1.0 / 1000
# vector_peak_fp32_tflops: 4.1  # 4 * 64 * 16 * 1.0 / 1000
