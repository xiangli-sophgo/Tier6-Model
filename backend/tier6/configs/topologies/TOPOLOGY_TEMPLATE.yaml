# 拓扑配置模板
# 版本: v2.1+ (新格式，使用 hardware_params.chips)

name: "TOPOLOGY_TEMPLATE"
pod_count: 1
racks_per_pod: 1

rack_config:
  boards:
    - chips:
        - name: "SG2262"
          preset_id: "sg2262"  # 可选，如果使用预设
          count: 16
      count: 2

hardware_params:
  # ✅ 新格式：多芯片字典，按芯片名称索引
  chips:
    SG2262:
      name: "SG2262"
      num_cores: 64
      compute_tflops_fp8: 256
      compute_tflops_bf16: 128
      memory_capacity_gb: 32
      memory_bandwidth_gbps: 448
      memory_bandwidth_utilization: 0.85
      lmem_capacity_mb: 64
      lmem_bandwidth_gbps: 6400
      # 微架构参数
      cube_m: 16
      cube_k: 32
      cube_n: 8
      sram_size_kb: 2048
      sram_utilization: 0.45
      lane_num: 16
      align_bytes: 32
      compute_dma_overlap_rate: 0.8

  interconnect:
    c2c:
      bandwidth_gbps: 448
      latency_us: 1.0
    b2b:
      bandwidth_gbps: 400
      latency_us: 2.0
    r2r:
      bandwidth_gbps: 400
      latency_us: 3.0
    p2p:
      bandwidth_gbps: 400
      latency_us: 5.0

comm_latency_config:
  allreduce_algorithm: "ring"
  alltoall_algorithm: "pairwise"
  enable_compute_comm_overlap: true
  network_efficiency: 0.85

# 多芯片配置示例
# hardware_params:
#   chips:
#     SG2262:
#       name: "SG2262"
#       num_cores: 64
#       # ...
#     H100:
#       name: "H100"
#       num_cores: 132
#       # ...
