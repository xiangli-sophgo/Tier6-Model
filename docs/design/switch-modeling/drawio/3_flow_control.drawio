<mxfile host="65bd71144e">
    <diagram id="pfc-seq" name="3.3 PFC Sequence">
        <mxGraphModel dx="573" dy="137" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="530" math="0" shadow="0">
            <root>
                <mxCell id="t1_0"/>
                <mxCell id="t1_1" parent="t1_0"/>
                <mxCell id="t1_title" value="&lt;b&gt;3.3 PFC Sequence Diagram&lt;/b&gt;" style="text;html=1;align=center;fontSize=16;fontColor=#333;verticalAlign=middle;" parent="t1_1" vertex="1">
                    <mxGeometry x="250" y="10" width="400" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t1_hdrA" value="&lt;b&gt;Chip A&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;发送端 RC Link&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#d6e9f8;strokeColor=#2885ca;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="80" y="50" width="150" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="t1_hdrS" value="&lt;b&gt;L2 Switch&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;端口 X&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="350" y="50" width="150" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="t1_hdrB" value="&lt;b&gt;Chip B&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;接收端 PAXI RX&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#e2f0e2;strokeColor=#43a047;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="620" y="50" width="150" height="44" as="geometry"/>
                </mxCell>
                <mxCell id="t1_lifeA" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d6e9f8;strokeColor=#2885ca;" parent="t1_1" vertex="1">
                    <mxGeometry x="152" y="94" width="6" height="380" as="geometry"/>
                </mxCell>
                <mxCell id="t1_lifeS" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t1_1" vertex="1">
                    <mxGeometry x="422" y="94" width="6" height="380" as="geometry"/>
                </mxCell>
                <mxCell id="t1_lifeB" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e2f0e2;strokeColor=#43a047;" parent="t1_1" vertex="1">
                    <mxGeometry x="692" y="94" width="6" height="380" as="geometry"/>
                </mxCell>
                <mxCell id="t1_m1" value="Data" style="html=1;fontSize=11;fontColor=#2885ca;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#2885ca;strokeWidth=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="158" y="140" as="sourcePoint"/>
                        <mxPoint x="422" y="140" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_m2" value="Data" style="html=1;fontSize=11;fontColor=#e8a838;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#e8a838;strokeWidth=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="428" y="170" as="sourcePoint"/>
                        <mxPoint x="692" y="170" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_e1" value="&lt;font color=&quot;#d84315&quot;&gt;&lt;b&gt;&lt;i&gt;[!] RX Buffer &amp;gt; 高水位&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t1_1" vertex="1">
                    <mxGeometry x="700" y="188" width="170" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t1_m4" value="PFC PAUSE" style="html=1;fontSize=11;fontColor=#d84315;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;dashed=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="692" y="230" as="sourcePoint"/>
                        <mxPoint x="428" y="230" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_e2" value="&lt;font color=&quot;#e8a838&quot;&gt;&lt;i&gt;[!] 暂停向 B 发送&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t1_1" vertex="1">
                    <mxGeometry x="430" y="238" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t1_m6" value="PFC PAUSE" style="html=1;fontSize=11;fontColor=#d84315;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;dashed=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="422" y="280" as="sourcePoint"/>
                        <mxPoint x="158" y="280" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_e3" value="&lt;font color=&quot;#2885ca&quot;&gt;&lt;i&gt;[!] RC Link 暂停发送&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=right;fontSize=10;verticalAlign=middle;" parent="t1_1" vertex="1">
                    <mxGeometry y="288" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t1_e4" value="&lt;font color=&quot;#43a047&quot;&gt;&lt;i&gt;Buffer &amp;lt; 低水位, 解除&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t1_1" vertex="1">
                    <mxGeometry x="700" y="333" width="170" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t1_m9" value="RESUME / 超时" style="html=1;fontSize=11;fontColor=#43a047;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#43a047;strokeWidth=1;dashed=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="692" y="370" as="sourcePoint"/>
                        <mxPoint x="428" y="370" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_m10" value="RESUME" style="html=1;fontSize=11;fontColor=#43a047;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#43a047;strokeWidth=1;dashed=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="422" y="400" as="sourcePoint"/>
                        <mxPoint x="158" y="400" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_m11" value="Data (恢复)" style="html=1;fontSize=11;fontColor=#2885ca;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#2885ca;strokeWidth=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="158" y="440" as="sourcePoint"/>
                        <mxPoint x="422" y="440" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_note" value="&lt;font color=&quot;#999&quot; style=&quot;font-size:10px;&quot;&gt;PFC 逐跳传播背压, 每跳延迟 ~1 RTT. 风险: PFC 死锁 / PFC 风暴&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t1_1" vertex="1">
                    <mxGeometry x="30" y="460" width="500" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg_bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#E0E0E0;" parent="t1_1" vertex="1">
                    <mxGeometry x="30" y="485" width="840" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg1" value="" style="endArrow=block;endFill=1;strokeColor=#2885ca;strokeWidth=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="50" y="502" as="sourcePoint"/>
                        <mxPoint x="90" y="502" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_leg1t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Data 正常传输&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="95" y="493" width="100" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg2" value="" style="endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;dashed=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="220" y="502" as="sourcePoint"/>
                        <mxPoint x="260" y="502" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_leg2t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;PFC PAUSE&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="265" y="493" width="80" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg3" value="" style="endArrow=block;endFill=1;strokeColor=#43a047;strokeWidth=1;dashed=1;" parent="t1_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="370" y="502" as="sourcePoint"/>
                        <mxPoint x="410" y="502" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t1_leg3t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;RESUME / 恢复&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="415" y="493" width="100" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d6e9f8;strokeColor=#2885ca;" parent="t1_1" vertex="1">
                    <mxGeometry x="540" y="495" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg4t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Chip&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="558" y="493" width="40" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t1_1" vertex="1">
                    <mxGeometry x="610" y="495" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg5t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Switch&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="628" y="493" width="50" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0e2;strokeColor=#43a047;" parent="t1_1" vertex="1">
                    <mxGeometry x="690" y="495" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t1_leg6t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Success/Resume&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t1_1" vertex="1">
                    <mxGeometry x="708" y="493" width="90" height="18" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="ecn-flow" name="3.5 ECN Flow">
        <mxGraphModel dx="573" dy="516" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="900" pageHeight="490" math="0" shadow="0">
            <root>
                <mxCell id="t2_0"/>
                <mxCell id="t2_1" parent="t2_0"/>
                <mxCell id="t2_title" value="&lt;b&gt;3.5 ECN Flow Diagram&lt;/b&gt;" style="text;html=1;align=center;fontSize=16;fontColor=#333;verticalAlign=middle;" parent="t2_1" vertex="1">
                    <mxGeometry x="250" y="10" width="400" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t2_hdrA" value="&lt;b&gt;Chip A (发送端)&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;RC Link&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#d6e9f8;strokeColor=#2885ca;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="80" y="50" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="t2_hdrS" value="&lt;b&gt;L2 Switch&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;出口队列&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="350" y="50" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="t2_hdrB" value="&lt;b&gt;Chip B (接收端)&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;RC Link&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#e2f0e2;strokeColor=#43a047;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="620" y="50" width="150" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="t2_lifeA" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d6e9f8;strokeColor=#2885ca;" parent="t2_1" vertex="1">
                    <mxGeometry x="152" y="90" width="6" height="330" as="geometry"/>
                </mxCell>
                <mxCell id="t2_lifeS" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t2_1" vertex="1">
                    <mxGeometry x="422" y="90" width="6" height="330" as="geometry"/>
                </mxCell>
                <mxCell id="t2_lifeB" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e2f0e2;strokeColor=#43a047;" parent="t2_1" vertex="1">
                    <mxGeometry x="692" y="90" width="6" height="330" as="geometry"/>
                </mxCell>
                <mxCell id="t2_m1" value="Data (ECN=01, ECT)" style="html=1;fontSize=11;fontColor=#2885ca;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#2885ca;strokeWidth=1;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="158" y="130" as="sourcePoint"/>
                        <mxPoint x="422" y="130" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_e1" value="&lt;font color=&quot;#d84315&quot;&gt;&lt;i&gt;[!] 队列深度 &amp;gt; 阈值, 标记 ECN=11 (CE)&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t2_1" vertex="1">
                    <mxGeometry x="430" y="138" width="250" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t2_m3" value="Data (ECN=11, CE)" style="html=1;fontSize=11;fontColor=#d84315;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="428" y="195" as="sourcePoint"/>
                        <mxPoint x="692" y="195" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_e2" value="&lt;font color=&quot;#43a047&quot;&gt;&lt;i&gt;[!] 检测 ECN=11, 生成 CNP 报文&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t2_1" vertex="1">
                    <mxGeometry x="700" y="203" width="190" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t2_m5" value="CNP (Opcode=10)" style="html=1;fontSize=11;fontColor=#6a1b9a;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#6a1b9a;strokeWidth=2;dashed=1;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="692" y="260" as="sourcePoint"/>
                        <mxPoint x="428" y="260" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_m6" value="CNP (转发)" style="html=1;fontSize=11;fontColor=#6a1b9a;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#6a1b9a;strokeWidth=2;dashed=1;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="422" y="290" as="sourcePoint"/>
                        <mxPoint x="158" y="290" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_e3" value="&lt;font color=&quot;#2885ca&quot;&gt;&lt;i&gt;[!] Per-QP 速率控制降速&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=right;fontSize=10;verticalAlign=middle;" parent="t2_1" vertex="1">
                    <mxGeometry y="298" width="150" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t2_m8" value="Data (降速后)" style="html=1;fontSize=11;fontColor=#999;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#999;strokeWidth=1;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="158" y="360" as="sourcePoint"/>
                        <mxPoint x="422" y="360" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_detail" value="&lt;b&gt;ECN 阈值关系&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;ecn_low (30-50%) &amp;lt; ecn_high (70-80%) &amp;lt; pfc_xon (80-85%)&lt;br&gt;ECN 应在 PFC 之前生效&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;align=left;verticalAlign=top;spacingLeft=12;fillColor=#f5f5f5;strokeColor=#E0E0E0;shadow=1;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="30" y="390" width="350" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg_bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#E0E0E0;" parent="t2_1" vertex="1">
                    <mxGeometry x="30" y="450" width="840" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg1" value="" style="endArrow=block;endFill=1;strokeColor=#2885ca;strokeWidth=1;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="50" y="465" as="sourcePoint"/>
                        <mxPoint x="90" y="465" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_leg1t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Data&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="95" y="456" width="40" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg2" value="" style="endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="160" y="465" as="sourcePoint"/>
                        <mxPoint x="200" y="465" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_leg2t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;ECN CE 标记&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="205" y="456" width="80" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg3" value="" style="endArrow=block;endFill=1;strokeColor=#6a1b9a;strokeWidth=2;dashed=1;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="310" y="465" as="sourcePoint"/>
                        <mxPoint x="350" y="465" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_leg3t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;CNP 反馈&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="355" y="456" width="70" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg4" value="" style="endArrow=block;endFill=1;strokeColor=#999;strokeWidth=1;" parent="t2_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="450" y="465" as="sourcePoint"/>
                        <mxPoint x="490" y="465" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t2_leg4t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;降速后传输&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="495" y="456" width="80" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d6e9f8;strokeColor=#2885ca;" parent="t2_1" vertex="1">
                    <mxGeometry x="600" y="458" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg5t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Chip&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="618" y="456" width="40" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t2_1" vertex="1">
                    <mxGeometry x="670" y="458" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg6t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Switch&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="688" y="456" width="50" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg7" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0e2;strokeColor=#43a047;" parent="t2_1" vertex="1">
                    <mxGeometry x="750" y="458" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t2_leg7t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Receiver&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t2_1" vertex="1">
                    <mxGeometry x="768" y="456" width="60" height="18" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="pfc-hops" name="5.7 PFC Hop-by-Hop">
        <mxGraphModel dx="1573" dy="516" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000" pageHeight="580" math="0" shadow="0">
            <root>
                <mxCell id="t3_0"/>
                <mxCell id="t3_1" parent="t3_0"/>
                <mxCell id="t3_title" value="&lt;b&gt;5.7 PFC Hop-by-Hop Backpressure&lt;/b&gt;" style="text;html=1;align=center;fontSize=16;fontColor=#333;verticalAlign=middle;" parent="t3_1" vertex="1">
                    <mxGeometry x="300" y="10" width="400" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t3_hdrA" value="&lt;b&gt;Chip A&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#d6e9f8;strokeColor=#2885ca;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="50" y="50" width="100" height="36" as="geometry"/>
                </mxCell>
                <mxCell id="t3_hdrS1" value="&lt;b&gt;Switch 1&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="260" y="50" width="100" height="36" as="geometry"/>
                </mxCell>
                <mxCell id="t3_hdrS2" value="&lt;b&gt;Switch 2&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="470" y="50" width="100" height="36" as="geometry"/>
                </mxCell>
                <mxCell id="t3_hdrB" value="&lt;b&gt;Chip B&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fillColor=#e2f0e2;strokeColor=#43a047;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="680" y="50" width="100" height="36" as="geometry"/>
                </mxCell>
                <mxCell id="t3_lifeA" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#d6e9f8;strokeColor=#2885ca;" parent="t3_1" vertex="1">
                    <mxGeometry x="97" y="86" width="6" height="430" as="geometry"/>
                </mxCell>
                <mxCell id="t3_lifeS1" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t3_1" vertex="1">
                    <mxGeometry x="307" y="86" width="6" height="430" as="geometry"/>
                </mxCell>
                <mxCell id="t3_lifeS2" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t3_1" vertex="1">
                    <mxGeometry x="517" y="86" width="6" height="430" as="geometry"/>
                </mxCell>
                <mxCell id="t3_lifeB" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#e2f0e2;strokeColor=#43a047;" parent="t3_1" vertex="1">
                    <mxGeometry x="727" y="86" width="6" height="430" as="geometry"/>
                </mxCell>
                <mxCell id="t3_m1" value="Data (pri p)" style="html=1;fontSize=11;fontColor=#2885ca;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#2885ca;strokeWidth=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="103" y="120" as="sourcePoint"/>
                        <mxPoint x="307" y="120" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_m2" value="Data (pri p)" style="html=1;fontSize=11;fontColor=#e8a838;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#e8a838;strokeWidth=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="313" y="145" as="sourcePoint"/>
                        <mxPoint x="517" y="145" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_m3" value="Data (pri p)" style="html=1;fontSize=11;fontColor=#e8a838;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#e8a838;strokeWidth=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="523" y="170" as="sourcePoint"/>
                        <mxPoint x="727" y="170" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_e1" value="&lt;font color=&quot;#d84315&quot;&gt;&lt;b&gt;&lt;i&gt;Step 1: PAXI RX Buffer &amp;gt; 高水位&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t3_1" vertex="1">
                    <mxGeometry x="735" y="188" width="250" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t3_m5" value="PFC PAUSE (pri p)" style="html=1;fontSize=11;fontColor=#d84315;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;dashed=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="727" y="240" as="sourcePoint"/>
                        <mxPoint x="523" y="240" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_e2" value="&lt;font color=&quot;#e8a838&quot;&gt;&lt;i&gt;Step 2: 暂停 pri p 到 B, VOQ 积压&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t3_1" vertex="1">
                    <mxGeometry x="525" y="248" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t3_m7" value="PFC PAUSE (pri p)" style="html=1;fontSize=11;fontColor=#d84315;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;dashed=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="517" y="310" as="sourcePoint"/>
                        <mxPoint x="313" y="310" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_e3" value="&lt;font color=&quot;#e8a838&quot;&gt;&lt;i&gt;Step 3: 暂停 pri p 到 S2, VOQ 积压&lt;/i&gt;&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;verticalAlign=middle;" parent="t3_1" vertex="1">
                    <mxGeometry x="315" y="318" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t3_m9" value="PFC PAUSE (pri p)" style="html=1;fontSize=11;fontColor=#d84315;fontStyle=1;align=center;verticalAlign=bottom;endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;dashed=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="307" y="380" as="sourcePoint"/>
                        <mxPoint x="103" y="380" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_e4" value="&lt;font color=&quot;#2885ca&quot;&gt;&lt;b&gt;&lt;i&gt;Step 4: RC Link 暂停发送 pri p, 背压逐跳完成&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;align=right;fontSize=10;verticalAlign=middle;" parent="t3_1" vertex="1">
                    <mxGeometry x="-110" y="388" width="310" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="t3_risk1" value="&lt;b&gt;PFC 死锁&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;环路拓扑循环依赖&lt;br&gt;[缓解] 避免环路 / PFC Watchdog&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;align=left;verticalAlign=top;spacingLeft=12;fillColor=#f5f5f5;strokeColor=#E0E0E0;shadow=1;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="30" y="440" width="290" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="t3_risk2" value="&lt;b&gt;PFC 风暴&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;单点 PAUSE 雪崩传播&lt;br&gt;[缓解] 限制传播深度 / 用 ECN&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;align=left;verticalAlign=top;spacingLeft=12;fillColor=#f5f5f5;strokeColor=#E0E0E0;shadow=1;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="340" y="440" width="290" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="t3_risk3" value="&lt;b&gt;Victim Flow&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;无关流被同优先级误暂停&lt;br&gt;[缓解] REQ/RSP 分优先级&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;align=left;verticalAlign=top;spacingLeft=12;fillColor=#f5f5f5;strokeColor=#E0E0E0;shadow=1;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="650" y="440" width="290" height="55" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg_bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#E0E0E0;" parent="t3_1" vertex="1">
                    <mxGeometry x="30" y="505" width="940" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg1" value="" style="endArrow=block;endFill=1;strokeColor=#2885ca;strokeWidth=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="50" y="520" as="sourcePoint"/>
                        <mxPoint x="90" y="520" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_leg1t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Data&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="95" y="511" width="40" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg2" value="" style="endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=2;dashed=1;" parent="t3_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="160" y="520" as="sourcePoint"/>
                        <mxPoint x="200" y="520" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t3_leg2t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;PFC PAUSE&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="205" y="511" width="80" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d6e9f8;strokeColor=#2885ca;" parent="t3_1" vertex="1">
                    <mxGeometry x="320" y="513" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg3t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Chip&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="338" y="511" width="40" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t3_1" vertex="1">
                    <mxGeometry x="400" y="513" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg4t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Switch&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="418" y="511" width="50" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg5" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0e2;strokeColor=#43a047;" parent="t3_1" vertex="1">
                    <mxGeometry x="490" y="513" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg5t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Receiver&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="508" y="511" width="60" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#E0E0E0;shadow=1;" parent="t3_1" vertex="1">
                    <mxGeometry x="600" y="513" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t3_leg6t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Risk / Detail&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t3_1" vertex="1">
                    <mxGeometry x="618" y="511" width="80" height="18" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
    <diagram id="ecn-thresh" name="5.8 ECN Thresholds">
        <mxGraphModel dx="573" dy="516" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000" pageHeight="460" math="0" shadow="0">
            <root>
                <mxCell id="t4_0"/>
                <mxCell id="t4_1" parent="t4_0"/>
                <mxCell id="t4_title" value="&lt;b&gt;5.8 ECN Thresholds &amp;amp; Marking Logic&lt;/b&gt;" style="text;html=1;align=center;fontSize=16;fontColor=#333;verticalAlign=middle;" parent="t4_1" vertex="1">
                    <mxGeometry x="300" y="10" width="400" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_bar_title" value="&lt;b&gt;出口队列深度 0% -------&amp;gt; 100%&lt;/b&gt;" style="text;html=1;align=left;fontSize=12;fontColor=#333;verticalAlign=middle;" parent="t4_1" vertex="1">
                    <mxGeometry x="30" y="50" width="300" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="t4_z1" value="&lt;b&gt;正常&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;&quot;&gt;不标记&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#e2f0e2;strokeColor=#43a047;fontColor=#333;verticalAlign=middle;" parent="t4_1" vertex="1">
                    <mxGeometry x="30" y="80" width="200" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t4_z2" value="&lt;b&gt;ECN 概率标记&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;&quot;&gt;P=(Q-low)/(high-low)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;verticalAlign=middle;" parent="t4_1" vertex="1">
                    <mxGeometry x="230" y="80" width="200" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t4_z3" value="&lt;b&gt;ECN 全标记&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;&quot;&gt;ECN=11(CE)&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;verticalAlign=middle;strokeWidth=2;" parent="t4_1" vertex="1">
                    <mxGeometry x="430" y="80" width="140" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t4_z4" value="&lt;b&gt;PFC 触发&lt;/b&gt;&lt;br&gt;&lt;font style=&quot;font-size:10px;&quot;&gt;PAUSE 帧&lt;/font&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fbe9e7;strokeColor=#d84315;fontColor=#333;verticalAlign=middle;" parent="t4_1" vertex="1">
                    <mxGeometry x="570" y="80" width="120" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t4_z5" value="&lt;b&gt;PFC 持续&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fbe9e7;strokeColor=#d84315;fontColor=#333;verticalAlign=middle;strokeWidth=2;" parent="t4_1" vertex="1">
                    <mxGeometry x="690" y="80" width="100" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t4_z6" value="&lt;b&gt;&lt;font color=&quot;#ffffff&quot;&gt;溢出!&lt;/font&gt;&lt;/b&gt;" style="rounded=0;whiteSpace=wrap;html=1;fontSize=11;fillColor=#d84315;strokeColor=#d84315;fontColor=#ffffff;verticalAlign=middle;" parent="t4_1" vertex="1">
                    <mxGeometry x="790" y="80" width="70" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="t4_th1" value="&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;ecn_low&lt;br&gt;(30-50%)&lt;/font&gt;" style="text;html=1;align=center;fontSize=10;verticalAlign=top;" parent="t4_1" vertex="1">
                    <mxGeometry x="185" y="132" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_th1_line" value="" style="endArrow=none;strokeColor=#666;strokeWidth=1;dashed=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="230" y="80" as="sourcePoint"/>
                        <mxPoint x="230" y="132" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_th2" value="&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;ecn_high&lt;br&gt;(70-80%)&lt;/font&gt;" style="text;html=1;align=center;fontSize=10;verticalAlign=top;" parent="t4_1" vertex="1">
                    <mxGeometry x="388" y="132" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_th2_line" value="" style="endArrow=none;strokeColor=#666;strokeWidth=1;dashed=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="430" y="80" as="sourcePoint"/>
                        <mxPoint x="430" y="132" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_th3" value="&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;pfc_xon&lt;br&gt;(80-85%)&lt;/font&gt;" style="text;html=1;align=center;fontSize=10;verticalAlign=top;" parent="t4_1" vertex="1">
                    <mxGeometry x="528" y="132" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_th3_line" value="" style="endArrow=none;strokeColor=#666;strokeWidth=1;dashed=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="570" y="80" as="sourcePoint"/>
                        <mxPoint x="570" y="132" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_th4" value="&lt;font style=&quot;font-size:10px;color:#666;&quot;&gt;pfc_xoff&lt;br&gt;(60-70%)&lt;/font&gt;" style="text;html=1;align=center;fontSize=10;verticalAlign=top;" parent="t4_1" vertex="1">
                    <mxGeometry x="648" y="132" width="80" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_th4_line" value="" style="endArrow=none;strokeColor=#666;strokeWidth=1;dashed=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="690" y="80" as="sourcePoint"/>
                        <mxPoint x="690" y="132" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_goal" value="&lt;font color=&quot;#333&quot;&gt;&lt;b&gt;设计目标:&lt;/b&gt; ECN 应在 PFC 之前生效, 通过端到端降速避免触发逐跳 PFC&lt;/font&gt;" style="text;html=1;align=left;fontSize=11;verticalAlign=middle;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="30" y="170" width="500" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="t4_flow_title" value="&lt;b&gt;ECN 标记逻辑 (帧出队时)&lt;/b&gt;" style="text;html=1;align=left;fontSize=13;fontColor=#333;verticalAlign=middle;" parent="t4_1" vertex="1">
                    <mxGeometry x="30" y="200" width="250" height="25" as="geometry"/>
                </mxCell>
                <mxCell id="t4_d1" value="&lt;b&gt;IP ECN&lt;br&gt;字段?&lt;/b&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="60" y="240" width="110" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="t4_skip" value="&lt;font color=&quot;#999&quot;&gt;跳过 (不支持)&lt;/font&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#f5f5f5;strokeColor=#E0E0E0;fontColor=#999;" parent="t4_1" vertex="1">
                    <mxGeometry x="230" y="235" width="120" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="t4_d1_to_skip" value="&lt;font style=&quot;font-size:9px;color:#999;&quot;&gt;00 Not-ECT&lt;/font&gt;" style="html=1;fontSize=9;endArrow=block;endFill=1;strokeColor=#999;strokeWidth=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="170" y="260" as="sourcePoint"/>
                        <mxPoint x="230" y="252" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_d2" value="&lt;b&gt;队列&lt;br&gt;深度?&lt;/b&gt;" style="rhombus;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="230" y="295" width="110" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="t4_d1_to_d2" value="&lt;font style=&quot;font-size:9px;color:#e8a838;&quot;&gt;01/10 ECT&lt;/font&gt;" style="html=1;fontSize=9;endArrow=block;endFill=1;strokeColor=#e8a838;strokeWidth=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="115" y="310" as="sourcePoint"/>
                        <mxPoint x="230" y="325" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_nomark" value="&lt;b&gt;不标记&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#e2f0e2;strokeColor=#43a047;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="410" y="278" width="100" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_d2_to_nomark" value="&lt;font style=&quot;font-size:9px;color:#43a047;&quot;&gt;&amp;lt; low&lt;/font&gt;" style="html=1;fontSize=9;endArrow=block;endFill=1;strokeColor=#43a047;strokeWidth=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="340" y="310" as="sourcePoint"/>
                        <mxPoint x="410" y="293" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_prob" value="&lt;b&gt;概率标记 ECN=11&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#fef3e0;strokeColor=#e8a838;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="410" y="318" width="150" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_d2_to_prob" value="&lt;font style=&quot;font-size:9px;color:#e8a838;&quot;&gt;low ~ high&lt;/font&gt;" style="html=1;fontSize=9;endArrow=block;endFill=1;strokeColor=#e8a838;strokeWidth=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="340" y="325" as="sourcePoint"/>
                        <mxPoint x="410" y="333" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_certain" value="&lt;b&gt;&lt;font color=&quot;#ffffff&quot;&gt;确定标记 ECN=11&lt;/font&gt;&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;fontSize=11;fillColor=#d84315;strokeColor=#d84315;fontColor=#ffffff;" parent="t4_1" vertex="1">
                    <mxGeometry x="410" y="358" width="150" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_d2_to_certain" value="&lt;font style=&quot;font-size:9px;color:#d84315;&quot;&gt;&amp;gt;= high&lt;/font&gt;" style="html=1;fontSize=9;endArrow=block;endFill=1;strokeColor=#d84315;strokeWidth=1;" parent="t4_1" edge="1">
                    <mxGeometry relative="1" as="geometry">
                        <mxPoint x="340" y="340" as="sourcePoint"/>
                        <mxPoint x="410" y="373" as="targetPoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="t4_leg_bg" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#E0E0E0;" parent="t4_1" vertex="1">
                    <mxGeometry x="30" y="420" width="940" height="30" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e2f0e2;strokeColor=#43a047;" parent="t4_1" vertex="1">
                    <mxGeometry x="50" y="428" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg1t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;正常 / 不标记&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="68" y="426" width="90" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg2" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t4_1" vertex="1">
                    <mxGeometry x="180" y="428" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg2t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;ECN 标记区间&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="198" y="426" width="90" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbe9e7;strokeColor=#d84315;" parent="t4_1" vertex="1">
                    <mxGeometry x="310" y="428" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg3t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;PFC 触发区间&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="328" y="426" width="90" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg4" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d84315;strokeColor=#d84315;" parent="t4_1" vertex="1">
                    <mxGeometry x="440" y="428" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg4t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;溢出 / 确定标记&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="458" y="426" width="100" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg5" value="" style="rhombus;whiteSpace=wrap;html=1;fillColor=#fef3e0;strokeColor=#e8a838;" parent="t4_1" vertex="1">
                    <mxGeometry x="580" y="427" width="16" height="16" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg5t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;判断节点&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="600" y="426" width="70" height="18" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg6" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#E0E0E0;shadow=1;" parent="t4_1" vertex="1">
                    <mxGeometry x="690" y="428" width="14" height="14" as="geometry"/>
                </mxCell>
                <mxCell id="t4_leg6t" value="&lt;font style=&quot;font-size:10px;&quot;&gt;Detail Panel&lt;/font&gt;" style="text;html=1;align=left;fontSize=10;fontColor=#333;" parent="t4_1" vertex="1">
                    <mxGeometry x="708" y="426" width="80" height="18" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>